<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Smooth Status Bar Blending -->
    <meta name="theme-color" content="#eef2f3" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0f2027" media="(prefers-color-scheme: dark)">

    <title>AirLink</title>

    <!-- PWA Manifest & Icons -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- External Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div id="toast" class="toast">
        <i class="ph-bold ph-check-circle" id="toast-icon"></i> 
        <span id="toast-msg">Notification</span>
    </div>

    <div class="confirm-overlay" id="confirm-modal">
        <div class="confirm-box">
            <div style="font-weight:700; font-size:1.1rem; margin-bottom:8px;" id="confirm-title">Confirm</div>
            <div style="font-size:0.9rem; color:var(--text-secondary);" id="confirm-text">Are you sure?</div>
            <div class="confirm-actions">
                <button class="btn-act btn-cancel" id="confirm-cancel">Cancel</button>
                <button class="btn-act btn-danger" id="confirm-ok">Confirm</button>
            </div>
        </div>
    </div>

    <header>
        <div class="brand">
            <img src="icon-192.png" alt="AirLink Logo" class="app-logo"> AirLink
        </div>
        <button id="auth-btn" class="auth-btn">Sign In</button>
    </header>

    <div id="app-content">
        <div class="calendar-section">
            <div class="calendar-card">
                <div class="calendar-header">
                    <div class="month-label" id="month-display">...</div>
                    <div style="display:flex; gap:8px;">
                        <button class="nav-btn" id="prev-month"><i class="ph-bold ph-caret-left"></i></button>
                        <button class="nav-btn" id="next-month"><i class="ph-bold ph-caret-right"></i></button>
                    </div>
                </div>
                <div class="weekdays">
                    <div>Su</div><div>Mo</div><div>Tu</div><div>We</div><div>Th</div><div>Fr</div><div>Sa</div>
                </div>
                <div class="days-grid" id="days-grid"></div>
            </div>
        </div>

        <div class="list-section">
            <div class="list-header" id="selected-date-label">Today</div>
            <div id="events-list"></div>
        </div>
    </div>

    <div class="fab-container" id="fab-container">
        <button class="fab-main" id="fab-main"><i class="ph-bold ph-plus"></i></button>
        <button class="fab-option btn-payment" data-type="payment" data-label="Payment"><i class="ph-bold ph-currency-dollar"></i></button>
        <button class="fab-option btn-todo" data-type="todo" data-label="To Do"><i class="ph-bold ph-check-square"></i></button>
        <button class="fab-option btn-event" data-type="event" data-label="Event"><i class="ph-bold ph-calendar"></i></button>
    </div>

    <div class="modal-overlay" id="modal">
        <div class="modal-sheet">
            <div style="display:flex; justify-content:space-between; margin-bottom:20px; align-items:center;">
                <span id="modal-title" style="font-weight:700; font-size:1.1rem;">New Item</span>
                <i class="ph-bold ph-x" onclick="attemptCloseModal()" style="font-size:24px; cursor:pointer; opacity:0.5;"></i>
            </div>
            <form id="event-form">
                <input type="hidden" id="inp-id">
                <input type="hidden" id="inp-type">
                
                <input type="text" id="inp-title" class="modal-input" placeholder="Title" required>
                
                <div class="time-input-wrapper">
                    <input type="time" id="inp-time" class="modal-input" required>
                </div>
                
                <div id="div-recurring" class="hidden-field">
                    <select id="inp-recurring" class="modal-input">
                        <option value="none">One-time Payment</option>
                        <option value="Weekly">Weekly</option>
                        <option value="Monthly">Monthly</option>
                        <option value="Yearly">Yearly</option>
                    </select>
                </div>

                <input type="text" id="inp-desc" class="modal-input" placeholder="Details (Optional)">
                
                <div class="modal-actions" id="modal-actions">
                    <button type="button" class="btn-delete" id="btn-delete-entry">Delete</button>
                    <button type="button" class="btn-toggle-status" id="btn-toggle-status">Mark Done</button>
                    <button type="submit" class="btn-save" id="modal-submit-btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Application Logic -->
    <script type="module" src="app.js"></script>
</body>
</html>
